# Salesforce Dynamic Custom Label Selector

There is currently no built-in way in Salesforce Apex to dynamically get a Custom Label (e.g.: choosing the API name of the label at runtime depending on some given context). Sure, the code could have a very large `switch` statement and use that to determine context and find the correct label. However, this is not maintainable or scalable if one needs to add new labels and contexts in the future. Every new label would require adding `when` statements to the `switch`, and re-deploying the selector code. This is prone to introducing errors, and there should be a better way.

I've made a simple Dynamic Custom Label Selector interface to accomplish just this. This was made as a way to solve a problem I had encountered while practicing applying the principles of [Singleton](https://youtu.be/TrZvNu9q49Y) and [Strategy](https://youtu.be/CEzgDeDyQSE) design patterns as shown on [Apex Hours](https://www.youtube.com/@apexhours). 

## How it works

In order to get the appropriate label according to some context determined at runtime, we're making use of one Apex Class per label. These classes will implement the `IGetDynamicLabel` interface, ensuring the appropriate `getLabel()` method is present. This may seem like a lot of work at first, but taking a look at the ones given [as an example in this repository](https://github.com/FedeAbella/sfdc-dynamic-custom-label-getter/tree/master/force-app/main/default/classes/CurrencyLabels), you can see they're extremely simple to make and test for. In return, we transfer the responsability of each label into a different class, which ensures adding new classes doesn't require modifying existing code.

A class implementing the `IDynamicLabelSelector` interface will work to determine context and find the appropriate class to call and get the label from. This will also be a singleton class, ensuring we're not unnecessarily creating multiple selectors. This class will build a context map from a Custom Metadata Type, mapping keys (e.g.: the DeveloperNames of the CMDT records) to the class names that need to be called to get the appropriate label.

And that's it! You can check out the [Currency Label Selector](https://github.com/FedeAbella/sfdc-dynamic-custom-label-getter/blob/master/force-app/main/default/classes/CurrencyLabels/CurrencyLabelSelector.cls) given as an example to see how it works. This repository also contains the Custom Metadata Type used, and all Custom Labels, so you can deploy it and test it in your own environment. In this example, we're implementing the interfaces to dynamically get the Custom Label for ARS, GBP, USD and UYU currencies, both singular and plural.